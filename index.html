<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maafin Yaaaaah</title>
    <!-- Memuat Tailwind CSS untuk styling responsif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat font Inter dan Bubblegum Sans dari Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Bubblegum+Sans&display=swap" rel="stylesheet">
    <style>
        /* Gaya dasar untuk body dan elemen root */
        body, html {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            margin: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #FDF7E4; /* Fallback background */
        }

        /* Gaya untuk setiap halaman */
        .page {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 1s ease-in-out, background 1s ease-in-out;
            opacity: 0;
            pointer-events: none;
            overflow: hidden;
            padding: 1rem;
        }
        /* Kelas untuk halaman yang aktif */
        .page.active {
            opacity: 1;
            pointer-events: auto;
        }

        /* Gaya untuk Halaman 1 (Surat Permintaan Maaf) */
        #page1 {
            background: linear-gradient(135deg, #FDF7E4, #F2EAD3);
        }
        #page1 .letter-container {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            max-width: 90%;
            width: 450px;
            font-family: 'Inter', sans-serif;
            text-align: left;
            position: relative;
            animation: float 5s ease-in-out infinite;
            z-index: 10;
        }
        #page1 .letter-container:before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 2px solid #D8BFD8;
            border-radius: 1.5rem;
            opacity: 0.8;
            pointer-events: none;
        }
        #page1 .ribbon {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 11;
            font-size: 2.5rem;
            transform: rotate(45deg);
        }
        #page1 .letter-text {
            font-size: 1.1rem;
            color: #4B0082;
            white-space: pre-line;
            line-height: 1.6;
        }
        #page1 .apology-button {
            margin-top: 1.5rem;
            background: linear-gradient(45deg, #D8BFD8, #C8A2C8);
            color: #4B0082;
            padding: 1.2rem 3rem;
            border-radius: 9999px;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
            border: 3px solid #DDA0DD;
            z-index: 10;
        }
        #page1 .apology-button:hover {
            transform: scale(1.1);
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }

        /* Gaya untuk Halaman 2, 3, 4, 5, 6, 7 dan Halaman Marah */
        .general-page {
            background: linear-gradient(135deg, #FFC0CB, #FFECF4);
        }
        .general-text {
            font-family: 'Bubblegum Sans', cursive;
            font-size: clamp(2rem, 6vw, 2.5rem);
            color: #E0115F;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            padding: 0 1rem;
        }
        .general-button {
            background: linear-gradient(45deg, #FF69B4, #E0115F);
            color: #FFFFFF;
            padding: 1.2rem 3rem;
            border-radius: 9999px;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out;
            border: 3px solid #FFC0CB;
            margin: 0.5rem;
        }
        .general-button:hover {
            transform: scale(1.1);
        }

        /* Gaya untuk item dan animasi */
        .item {
            font-size: 8rem;
            animation: pop-in 1s ease-out;
        }
        @keyframes pop-in {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }
        .flower-item {
            animation: flower-spin 3s infinite ease-in-out alternate;
        }
        @keyframes flower-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(10deg); }
        }
        .lolipop-item {
            animation: lolipop-spin 2s infinite linear;
        }
        @keyframes lolipop-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Animasi emotikon ketawa di Halaman 4 */
        .laugh-emoji {
            position: absolute;
            font-size: clamp(2rem, 8vw, 4rem);
            opacity: 0;
            animation: floatUpAndFade 4s infinite ease-out;
            pointer-events: none;
            z-index: 5;
        }
        @keyframes floatUpAndFade {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
        }

        /* Animasi hati di Halaman 2 */
        .flying-heart {
            position: absolute;
            font-size: clamp(1.5rem, 5vw, 3rem);
            color: #E0115F;
            opacity: 0;
            animation: floatUp 6s infinite ease-out;
            pointer-events: none;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
            z-index: 5;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(0.5) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-120vh) scale(1.8) rotate(360deg); opacity: 0; }
        }

        /* Animasi terompet di Halaman 3 */
        .flying-trumpet {
            position: absolute;
            font-size: clamp(1.8rem, 6vw, 3.5rem);
            opacity: 0;
            animation: floatAcrossAndRotate 7s infinite ease-out;
            pointer-events: none;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
            z-index: 5;
        }
        @keyframes floatAcrossAndRotate {
            0% { transform: translateX(-20vw) translateY(10vh) rotate(-30deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateX(120vw) translateY(-10vh) rotate(30deg); opacity: 0; }
        }

        /* Gaya untuk animasi uang jatuh di Halaman 7 */
        .money-note {
            position: absolute;
            font-size: clamp(1.8rem, 6vw, 3.5rem);
            opacity: 0;
            animation: fallAndRotate 5s infinite ease-in;
            pointer-events: none;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
            z-index: 5;
        }
        @keyframes fallAndRotate {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }

        /* Gaya untuk animasi confetti di Halaman 7 */
        .confetti {
            position: absolute;
            width: clamp(8px, 2vw, 15px);
            height: clamp(8px, 2vw, 15px);
            background-color: #FFD700;
            border-radius: 50%;
            opacity: 0;
            animation: confettiFall 4s infinite ease-out;
            pointer-events: none;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            z-index: 5;
        }
        @keyframes confettiFall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(1080deg); opacity: 0; }
        }

        /* Penyesuaian responsif untuk perangkat mobile */
        @media (max-width: 768px) {
            #page1 .letter-container { padding: 1.5rem; }
            #page1 .letter-text { font-size: 1rem; }
            .general-text { font-size: 1.8rem; }
            .general-button { font-size: 1.2rem; padding: 0.8rem 2rem; }
            .item { font-size: 6rem; }
        }
    </style>
</head>
<body>
    <!-- Halaman 1: Surat Permintaan Maaf -->
    <div id="page1" class="page active">
        <div class="ribbon">🎀</div>
        <div class="letter-container">
            <h1 class="letter-text font-bold mb-4">kepada : belaaaaaaaaaaa</h1>
            <p class="letter-text">
                Saya yang sering di panggil udin
                Meminta maaf yang sebesar-besarnya atas kesalahan saya maapin yaaa,
                ooh yah kenalin namaku Haikal Ma'ruf panggil aja kal atao rop jangan panggil udin plis 😭
            </p>
            <div class="flex justify-center">
                <button id="apologyBtn" class="apology-button">Lanjut</button>
            </div>
        </div>
    </div>

    <!-- Halaman 2: Maafin aku ya -->
    <div id="page2" class="page general-page">
        <h1 class="general-text">Maafin aku ya, please...</h1>
        <div class="flex flex-col sm:flex-row">
            <button id="forgiveBtn" class="general-button">Iya, dimaafin</button>
            <button id="dontForgiveBtn" class="general-button" style="background: linear-gradient(45deg, #888, #555); border-color: #aaa;">Enggak!</button>
        </div>
    </div>

    <!-- Halaman Marah: Jika tidak dimaafin -->
    <div id="pageAngry" class="page general-page">
        <h1 class="general-text">kamu marah banget yaah sama aku maafin aku yang gak pekaan, maafin yah 😀, ooh yah maaf tombolnya cuma ada 1 wkwkwkw</h1>
        <button id="forgivenBtn" class="general-button">Yaudah, aku maafin</button>
    </div>

    <!-- Halaman 3: Nih daget buat kamu -->
    <div id="page3" class="page general-page">
        <h1 class="general-text">Nih daget buat kamu</h1>
        <button id="page3Btn" class="general-button">Ambil</button>
    </div>

    <!-- Halaman 4: Tapi boong😭 dengan animasi ketawa -->
    <div id="page4" class="page general-page">
        <h1 class="general-text">Tapi boong😭</h1>
        <button id="page4Btn" class="general-button">Lanjut</button>
    </div>

    <!-- Halaman 5: Bunga Mawar -->
    <div id="page5" class="page general-page">
        <div class="item flower-item">🌹</div>
        <h1 class="general-text mt-4">Nih bunga aja buat kamu</h1>
        <button id="page5Btn" class="general-button">Lanjut</button>
    </div>

    <!-- Halaman 6: Lolipop -->
    <div id="page6" class="page general-page">
        <div class="item lolipop-item">🍭</div>
        <h1 class="general-text mt-4">nih permen buat kamu</h1>
        <button id="page6Btn" class="general-button">Lanjut</button>
    </div>

    <!-- Halaman 7: Daget Asli dengan Musik -->
    <div id="page7" class="page general-page">
        <h1 class="general-text">beneran nih daget buat kamu</h1>
        <!-- Link placeholder untuk daget. Ganti dengan link daget yang sebenarnya! -->
        <a id="dagetLink" href="https://link.dana.id/danakaget?c=s52kz35sy&r=clpgFI&orderId=20250731101214397315010300166002533433663" target="_blank" class="general-button">Ambil Dagetnya</a>
        <p class="text-sm text-gray-600 mt-4"></p>
    </div>

    <script>
        // Mendapatkan elemen-elemen halaman dan tombol
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const pageAngry = document.getElementById('pageAngry');
        const page3 = document.getElementById('page3');
        const page4 = document.getElementById('page4');
        const page5 = document.getElementById('page5');
        const page6 = document.getElementById('page6');
        const page7 = document.getElementById('page7');

        const apologyBtn = document.getElementById('apologyBtn');
        const forgiveBtn = document.getElementById('forgiveBtn');
        const dontForgiveBtn = document.getElementById('dontForgiveBtn');
        const forgivenBtn = document.getElementById('forgivenBtn');
        const page3Btn = document.getElementById('page3Btn');
        const page4Btn = document.getElementById('page4Btn');
        const page5Btn = document.getElementById('page5Btn');
        const page6Btn = document.getElementById('page6Btn');

        // --- PATH RELATIF KE FILE AUDIO ANDA ---
        // Pastikan nama file dan folder sesuai dengan yang ada di GitHub Anda.
        const page4MusicUrl = "hir.mp3"; // Ganti "suara-tawa.mp3" jika perlu
        const finalMusicUrl = "tawa.mp3"; // Ganti "musik-final.mp3" jika perlu
        // ------------------------------------------

        // Variabel untuk menyimpan audio player
        let page4MusicPlayer;
        let finalMusicPlayer;
        let audioInitialized = false;
        
        // Fungsi untuk menginisialisasi audio setelah interaksi pengguna pertama
        function initializeAudio() {
            if (audioInitialized) return;

            try {
                // Membuat instance audio dengan path relatif
                page4MusicPlayer = new Audio(page4MusicUrl);
                finalMusicPlayer = new Audio(finalMusicUrl);

                page4MusicPlayer.load();
                finalMusicPlayer.load();

                // Memainkan dan langsung menjeda audio untuk "membuka kunci" di browser
                page4MusicPlayer.play().then(() => page4MusicPlayer.pause()).catch(e => {});
                finalMusicPlayer.play().then(() => finalMusicPlayer.pause()).catch(e => {});

                audioInitialized = true;
                console.log("Audio initialized by user interaction.");
            } catch (e) {
                console.error("Error initializing audio:", e);
            }
        }


        // Fungsi untuk menampilkan halaman tertentu dan menyembunyikan yang lain
        function showPage(pageToShow) {
            const pages = [page1, page2, pageAngry, page3, page4, page5, page6, page7];
            pages.forEach(page => page.classList.remove('active'));
            pageToShow.classList.add('active');
        }

        // Fungsi untuk menghapus semua elemen animasi dari sebuah halaman
        function clearAnimations(page) {
            page.querySelectorAll('.heart, .laugh-emoji, .money-note, .confetti, .decor, .flying-heart, .flying-trumpet').forEach(el => el.remove());
        }

        // Fungsi untuk memulai animasi emotikon ketawa di Halaman 4
        function startLaughEmojiAnimation() {
            const numEmojis = 30;
            for (let i = 0; i < numEmojis; i++) {
                const emoji = document.createElement('span');
                emoji.classList.add('laugh-emoji');
                emoji.innerHTML = '😂';
                emoji.style.left = `${Math.random() * 100}vw`;
                emoji.style.animationDelay = `${Math.random() * 4}s`;
                emoji.style.animationDuration = `${5 + Math.random() * 3}s`;
                page4.appendChild(emoji);
            }
        }

        // Fungsi untuk memulai animasi hati di Halaman 2
        function startHeartAnimation() {
            const numHearts = 50;
            for (let i = 0; i < numHearts; i++) {
                const heart = document.createElement('span');
                heart.classList.add('flying-heart');
                heart.innerHTML = '❤️';
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.animationDelay = `${Math.random() * 4}s`;
                heart.style.animationDuration = `${5 + Math.random() * 3}s`;
                page2.appendChild(heart);
            }
        }
        
        // Fungsi untuk memulai animasi terompet di Halaman 3
        function startTrumpetAnimation() {
            const numTrumpets = 40;
            for (let i = 0; i < numTrumpets; i++) {
                const trumpet = document.createElement('span');
                trumpet.classList.add('flying-trumpet');
                trumpet.innerHTML = '🎺';
                trumpet.style.top = `${Math.random() * 100}vh`;
                trumpet.style.animationDelay = `${Math.random() * 7}s`;
                trumpet.style.animationDuration = `${6 + Math.random() * 2}s`;
                page3.appendChild(trumpet);
            }
        }
        
        // Fungsi untuk memainkan audio
        function playAudio(player, loop = false) {
            if (!audioInitialized || !player) {
                console.log("Audio belum siap.");
                return;
            }
            player.loop = loop;
            player.currentTime = 0;
            player.play().catch(e => console.error('Gagal memutar audio:', e));
        }

        // Fungsi untuk menghentikan semua audio
        function stopAllAudio() {
            if (page4MusicPlayer && !page4MusicPlayer.paused) { page4MusicPlayer.pause(); }
            if (finalMusicPlayer && !finalMusicPlayer.paused) { finalMusicPlayer.pause(); }
        }
        
        // Fungsi untuk memulai animasi uang dan confetti di Halaman 7
        function startMoneyConfettiAnimation() {
            const numItems = 100;
            for (let i = 0; i < numItems; i++) {
                const money = document.createElement('span');
                money.classList.add('money-note');
                money.innerHTML = '💸';
                money.style.left = `${Math.random() * 100}vw`;
                money.style.animationDelay = `${Math.random() * 5}s`;
                money.style.animationDuration = `${4 + Math.random() * 2}s`;
                page7.appendChild(money);

                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 80%, 75%)`;
                confetti.style.animationDelay = `${Math.random() * 4}s`;
                confetti.style.animationDuration = `${3 + Math.random() * 2}s`;
                page7.appendChild(confetti);
            }
        }
        
        // --- Event Listeners untuk Tombol ---

        apologyBtn.addEventListener('click', () => {
            initializeAudio(); // Inisialisasi audio pada klik pertama
            clearAnimations(page1);
            showPage(page2);
            startHeartAnimation();
        });

        // Tombol di Halaman 2
        forgiveBtn.addEventListener('click', () => {
            clearAnimations(page2);
            showPage(page3);
            startTrumpetAnimation();
        });

        dontForgiveBtn.addEventListener('click', () => {
            clearAnimations(page2);
            showPage(pageAngry);
        });
        
        // Tombol di Halaman Marah
        forgivenBtn.addEventListener('click', () => {
            clearAnimations(pageAngry);
            showPage(page3);
            startTrumpetAnimation();
        });

        page3Btn.addEventListener('click', () => {
            clearAnimations(page3);
            stopAllAudio();
            showPage(page4);
            startLaughEmojiAnimation();
            playAudio(page4MusicPlayer, false); // Mainkan musik untuk halaman 4
        });

        page4Btn.addEventListener('click', () => {
            clearAnimations(page4);
            stopAllAudio();
            showPage(page5);
        });

        page5Btn.addEventListener('click', () => {
            clearAnimations(page5);
            stopAllAudio();
            showPage(page6);
        });

        page6Btn.addEventListener('click', () => {
            clearAnimations(page6);
            stopAllAudio();
            showPage(page7);
            startMoneyConfettiAnimation();
            playAudio(finalMusicPlayer, true); // Mainkan musik untuk halaman 7
        });

        // Saat dokumen selesai dimuat, tampilkan Halaman 1
        document.addEventListener('DOMContentLoaded', () => {
            showPage(page1);
        });
    </script>
</body>
</html>
